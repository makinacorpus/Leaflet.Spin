!function(t,n){"function"==typeof define&&define.amd?define(["leaflet","spin.js"],function(n,i){t(n,i)}):"object"==typeof exports?module.exports=function(n,i){return void 0===n&&(n=require("leaflet")),void 0===i&&(i=require("spin.js")),t(n,i),n}:void 0!==n&&n.L&&n.Spinner&&t(n.L,n.Spinner)}(function(n,t){var i={spin:function(n,i){n?(this._spinner||(this._spinner=new t(i).spin(this._container),this._spinning=0),this._spinning++):(this._spinning--,this._spinning<=0&&this._spinner&&(this._spinner.stop(),this._spinner=null))}};n.Map.include(i),n.Map.addInitHook(function(){this.on("layeradd",function(n){n.layer.loading&&this.spin(!0),"function"==typeof n.layer.on&&(n.layer.on("data:loading",function(){this.spin(!0)},this),n.layer.on("data:loaded",function(){this.spin(!1)},this))},this),this.on("layerremove",function(n){n.layer.loading&&this.spin(!1),"function"==typeof n.layer.on&&(n.layer.off("data:loaded"),n.layer.off("data:loading"))},this)})},window);
